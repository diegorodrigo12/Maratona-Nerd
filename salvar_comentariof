<?php
include 'conexao.php';

// Recebe os dados do formulário
$topico_id = $_POST['topico_id'] ?? '';
$comentario = $_POST['comentario'] ?? '';

// Verifica se os campos não estão vazios
if(empty($topico_id) || empty($comentario)) {
    echo "Erro: Campos obrigatórios não preenchidos. <a href='forum.php'>Voltar</a>";
    exit;
}

// Prepared statement para inserir comentário
$stmt = $conn->prepare("INSERT INTO comentarios (topico_id, comentario) VALUES (?, ?)");
$stmt->bind_param("is", $topico_id, $comentario);

if ($stmt->execute()) {
    echo "Comentário enviado com sucesso! <a href='forum.php'>Voltar</a>";
} else {
    echo "Erro: " . $stmt->error;
}

$stmt->close();
$conn->close();
?>
